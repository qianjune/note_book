# 网站安全



## sql注入

### 问题

执行查询时将恶意用户的sql参数直接拼接都查询语句

### 解决

1. 输入检查（转义字符）
2. 参数化查询，不直接将参数和查询句拼接
3. 鉴权

## xss

### 问题

用户在输入文本的地方，写入<script>脚本

### 解决

对接收到的文本做检查，直接解析成字符串

## csrf（跨站请求伪造）

### 问题

利用img src等dom元素可以跨域的机制，对得到认证的网站发请求

### 解决

1. 检查请求头中的referer
2. 在cookie上加入samesite配置
3. csrf token

## json劫持

### 问题

只要能获得使用者权限，并调用获取资料的 API，再加上改写原生的 JavaScript 对象，就可以窃取用户的敏感信息。

### 解决

1. API 的响应内容开头为for(;;); 立即执行script脚本

2. 鉴权加入csrf token